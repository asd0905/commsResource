import moment from"moment";import{param,ajax,get}from"jquery";class DateHelper{setEndDateToISOString(e){const o=moment(e);return o.hour(23),o.minute(59),o.second(59),o.toISOString()}}const MEMBER_URL="https://member.coolschool.co.kr",DEV_MEMBER_URL="https://dev-member.coolschool.co.kr",LOCAL_MEMBER_URL="https://local-member.coolschool.co.kr",COOLSCHOOL_URL="https://www.coolschool.co.kr",DEV_COOLSCHOOL_URL="https://dev.coolschool.co.kr",LOCAL_COOLSCHOOL_URL="https://local.coolschool.co.kr",COOL_LOGIN_URL=MEMBER_URL+"/login",DEV_COOL_LOGIN_URL=DEV_MEMBER_URL+"/login",LOCAL_COOL_LOGIN_URL=LOCAL_MEMBER_URL+"/login",COOL_LOGIN_CALLBACK_URL=window.location.protocol+"//"+window.location.host+"/callback",COOL_LOGIN_CALLBACK_FOR_SAMSTORY_URL=window.location.protocol+"//"+window.location.host+"/login",COOL_LOGIN_CALLBACK_FOR_EMOTICON_URL=window.location.protocol+"//"+window.location.host+"/login",COOL_LOGIN_CHECK_URL=`${MEMBER_URL}/loginCheck`,DEV_COOL_LOGIN_CHECK_URL=`${DEV_MEMBER_URL}/loginCheck`,LOCAL_COOL_LOGIN_CHECK_URL=`${LOCAL_MEMBER_URL}/loginCheck`,COOLSCHOOL_CALLBACK_URL="https://www.coolschool.co.kr/callback",DEV_COOLSCHOOL_CALLBACK_URL="https://dev.coolschool.co.kr/callback",LOCAL_COOLSCHOOL_CALLBACK_URL="https://local.coolschool.co.kr/callback",SEARCH_URL="//search.coolschool.co.kr",DEV_SEARCH_URL="//dev-search.coolschool.co.kr",LOCAL_SEARCH_URL="//local-search.coolschool.co.kr",FN_LOGOUT_URL=e=>`${e}/logout?client_id=:client_id`,FN_LOGOUT_PROC_URL=e=>`${e}/logoutProc`;class EnvHelper{getUrl(e,o,t){let a="";switch(e){case"prod":switch(o){case"member":a=MEMBER_URL;break;case"search":a=SEARCH_URL;break;case"coolschool":a=COOLSCHOOL_URL}break;case"dev":switch(o){case"member":a=DEV_MEMBER_URL;break;case"search":a=DEV_SEARCH_URL;break;case"coolschool":a=DEV_COOLSCHOOL_URL}break;case"local":switch(o){case"member":a=LOCAL_MEMBER_URL;break;case"search":a=LOCAL_SEARCH_URL;break;case"coolschool":a=LOCAL_COOLSCHOOL_URL}}return t?t(a):a}}class StorageHelper{setCookie(e,o,t){const a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);const r="expires="+a.toUTCString();document.cookie=e+"="+o+";"+r+";path=/"}setCookieHour(e,o,t){const a=new Date;a.setTime(a.getTime()+60*t*60*1e3);const r="expires="+a.toUTCString();document.cookie=e+"="+o+";"+r+";path=/"}getCookie(e){const o=e+"=",t=decodeURIComponent(document.cookie).split(";");for(let e=0;e<t.length;e++){let a=t[e];for(;" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(o))return a.substring(o.length,a.length)}return""}setSessionStorage(e,o){sessionStorage.setItem(e,o)}getSessionStorage(e){return sessionStorage.getItem(e)}}class UrlHelper{getQueryParam(e){return this.getQueryParams()[e]||""}getQueryParams(e=""){let o=e;o=(o=o||document.location.href.split("?")[1]||document.location.search).split("+").join(" ");const t={};let a;const r=/[?&]?([^=]+)=([^&]*)/g;for(;a=r.exec(o);)t[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return t}getHashSingleValue(e){const o=e.indexOf("#");return-1===o?"":e.substring(o)}}class Login{constructor(){this.urlHelper=new UrlHelper,this.storageHelper=new StorageHelper,this.envHelper=new EnvHelper}goDefaultCoolLogin(e="",o="",t=!1){const a={client_id:e,redirect_uri:COOL_LOGIN_CALLBACK_URL,redirect_uri_next:window.location.href,do_action:o};let r=COOL_LOGIN_URL;if("boolean"==typeof t)t&&(r=DEV_COOL_LOGIN_URL);else switch(t){case"prod":r=COOL_LOGIN_URL;break;case"dev":r=DEV_COOL_LOGIN_URL;break;case"local":r=LOCAL_COOL_LOGIN_URL;break;default:r=COOL_LOGIN_URL}let i=param(a);-1===a.redirect_uri_next.search("&")&&""!==o&&(i=i.replace("&do_action=","?do_action=")),window.location.href=`${r}?${i}`}goCoolLoginForSamstory(e="",o="",t=!1){const a={client_id:e,redirect_uri:COOL_LOGIN_CALLBACK_FOR_SAMSTORY_URL,redirect_uri_next:window.location.href,do_action:o};let r=COOL_LOGIN_URL;t&&(r=DEV_COOL_LOGIN_URL);let i=param(a);-1===a.redirect_uri_next.search("&")&&""!==o&&(i=i.replace("&do_action=","?do_action=")),window.location.href=`${r}?${i}`}goCoolLoginNextUrlForSamstory(e="",o="",t,a=!1){const r={client_id:e,redirect_uri:COOL_LOGIN_CALLBACK_FOR_SAMSTORY_URL,redirect_uri_next:t,do_action:o};let i=COOL_LOGIN_URL;a&&(i=DEV_COOL_LOGIN_URL);let n=param(r);-1===r.redirect_uri_next.search("&")&&""!==o&&(n=n.replace("&do_action=","?do_action=")),window.location.href=`${i}?${n}`}goCoolLoginForEmoticon(e="",o="",t=!1){const a={client_id:e,redirect_uri:COOL_LOGIN_CALLBACK_FOR_EMOTICON_URL,redirect_uri_next:window.location.href,do_action:o};let r=COOL_LOGIN_URL;t&&(r=DEV_COOL_LOGIN_URL);let i=param(a);-1===a.redirect_uri_next.search("&")&&""!==o&&(i=i.replace("&do_action=","?do_action=")),window.location.href=`${r}?${i}`}goCoolLoginNextUrlForEmoticon(e="",o="",t,a=!1){const r={client_id:e,redirect_uri:COOL_LOGIN_CALLBACK_FOR_EMOTICON_URL,redirect_uri_next:t,do_action:o};let i=COOL_LOGIN_URL;a&&(i=DEV_COOL_LOGIN_URL);let n=param(r);-1===r.redirect_uri_next.search("&")&&""!==o&&(n=n.replace("&do_action=","?do_action=")),window.location.href=`${i}?${n}`}goCoolLoginForProfile(e="",o="",t=!1){let a=COOL_LOGIN_URL,r=COOLSCHOOL_CALLBACK_URL;if("boolean"==typeof t)t&&(a=DEV_COOL_LOGIN_URL,r=DEV_COOLSCHOOL_CALLBACK_URL);else switch(t){case"prod":a=COOL_LOGIN_URL,r=COOLSCHOOL_CALLBACK_URL;break;case"dev":a=DEV_COOL_LOGIN_URL,r=DEV_COOLSCHOOL_CALLBACK_URL;break;case"local":a=LOCAL_COOL_LOGIN_URL,r=LOCAL_COOLSCHOOL_CALLBACK_URL;break;default:a=COOL_LOGIN_URL,r=COOLSCHOOL_CALLBACK_URL}const i={client_id:e,redirect_uri:r,redirect_uri_next:window.location.href,do_action:o},n=param(i);window.location.href=`${a}?${n}`}coolLoginCallbackRedirect(){let e=this.urlHelper.getQueryParam("redirect_uri_next");const o=this.urlHelper.getQueryParam("redirect");o&&(e=o);const t=this.urlHelper.getQueryParam("do_action");e?t?-1!==e.indexOf("?")?location.href=e+"&do_action="+t:location.href=e+"?do_action="+t:location.href=e:location.href="/"}coolLoginCheck(e=!1){let o=COOL_LOGIN_CHECK_URL;if("boolean"==typeof e)e&&(o=DEV_COOL_LOGIN_CHECK_URL);else switch(e){case"prod":o=COOL_LOGIN_CHECK_URL;break;case"dev":o=DEV_COOL_LOGIN_CHECK_URL;break;case"local":o=LOCAL_COOL_LOGIN_CHECK_URL;break;default:o=COOL_LOGIN_CHECK_URL}return ajax({method:"GET",dataType:"jsonp",url:o})}cooLoginCheck(e=!1){return this.coolLoginCheck(e)}async logout(e,o,t){const a={url:this.envHelper.getUrl(o,"member",FN_LOGOUT_URL).replace(":client_id",e),type:"GET",contentType:"application/json",dataType:"jsonp"};return"success"===(await ajax(a)).result&&(void 0!==(t=t||{}).isLogoutProc&&!0!==t.isLogoutProc||(t.logoutProcUrl?await get(FN_LOGOUT_PROC_URL(`${t.logoutProcUrl}`)):await get(FN_LOGOUT_PROC_URL(`//${window.location.host}`))),this.storageHelper.setCookie("accessToken","",-1),this.storageHelper.setCookie("client_id","",-1),void 0!==t.isRestoreLocation&&!0!==t.isRestoreLocation||(location.href=`//${window.location.host}${window.location.pathname}`),!0)}}class FileHelper{getExtension(e){return e.split(".").pop()}}class Factory{static newInstanceLogin(){return new Login}static newInstanceUrlHelper(){return new UrlHelper}static newInstanceDateHelper(){return new DateHelper}static newInstanceFileHelper(){return new FileHelper}}class SearchHelper{coolPageViewForStream(e,o,t,a,r="prod"){if(e||t){let i="/api/coolPageView/indexing";switch(r){case"local":i=LOCAL_SEARCH_URL+i;break;case"dev":i=DEV_SEARCH_URL+i;break;case"prod":default:i=SEARCH_URL+i}const n={serviceType:e,subServiceType:o,serviceSeq:t,url:window.location.href};a&&(n.coolIdx=a);const c={url:i,type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(n)};$.ajax(c)}}}class VueHelper{async settingUserParams(e,o,t){!!document.documentMode&&$.ajaxSetup({cache:!1});const a={url:e};let r={};return o.user||(o.authorization?(a.headers={Authorization:o.authorization,ClientId:o.clientId},r=await $.ajax(a),o.isAuth=r.result,o.user=r.result?r.data:{}):(o.isAuth=!1,o.user={})),t&&t(o),o}}class ValidationHelper{constructor(e,o,t){$(e).validate({ignore:`${o}`,submitHandler:()=>{t&&t()}}),$.extend($.validator.messages,{required:"필수 항목입니다.",remote:"항목을 수정하세요.",email:"유효하지 않은 E-Mail주소입니다.",url:"유효하지 않은 URL입니다.",date:"올바른 날짜를 입력하세요.",dateISO:"올바른 날짜(ISO)를 입력하세요.",number:"유효한 숫자가 아닙니다.",digits:"숫자만 입력 가능합니다.",creditcard:"신용카드 번호가 바르지 않습니다.",equalTo:"같은 값을 다시 입력하세요.",extension:"올바른 확장자가 아닙니다.",maxlength:$.validator.format("{0}자를 넘을 수 없습니다. "),minlength:$.validator.format("{0}자 이상 입력하세요."),rangelength:$.validator.format("문자 길이가 {0} 에서 {1} 사이의 값을 입력하세요."),range:$.validator.format("{0} 에서 {1} 사이의 값을 입력하세요."),max:$.validator.format("{0} 이하의 값을 입력하세요."),min:$.validator.format("{0} 이상의 값을 입력하세요.")}),$.validator.addMethod("whitespace",e=>{let o=!0;return(e&&0===$.trim(e).length||-1!==e.indexOf(" "))&&(o=!1),o},"띄어쓰기가 들어갈 수 없습니다.")}}class KakaoMapHelper{constructor(e){e=e||{},this.mapOpts=e||{},e.element||(this.mapOpts.element="map"),e.latitude&&e.longitude||(navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{this.mapOpts.latitude=e.coords.latitude,this.mapOpts.longitude=e.coords.longitude},()=>{this.mapOpts.latitude="37.56455490632751",this.mapOpts.longitude="126.9756149637474"}):(this.mapOpts.latitude="37.56455490632751",this.mapOpts.longitude="126.9756149637474")),e.level||(this.mapOpts.level="4")}latLng(e,o){return new kakao.maps.LatLng(e,o)}map(){const e=document.getElementById(this.mapOpts.element);if(e){const o={center:this.latLng(this.mapOpts.latitude,this.mapOpts.longitude),level:this.mapOpts.level};this.mapOpts.map=new kakao.maps.Map(e,o),this.mapOpts.map.relayout(),this.mapOpts.map.setCenter(o.center)}}marker(){const e=this.latLng(this.mapOpts.latitude,this.mapOpts.longitude),o=new kakao.maps.Marker({position:e,map:this.mapOpts.map});o.setPosition(e),o.setMap(this.mapOpts.map)}geocoderAddressSearch(e,o){return(new kakao.maps.services.Geocoder).addressSearch(e,o)}geocoder(){return new kakao.maps.services.Geocoder}}class DaumPostHelper{postcode(e){return new daum.Postcode(e).open()}}class SocialShareHelper{socialKind(e){let o={};const t=e.name;let a=document.location.href;e.href&&(a=e.href);const r=e.txt,i=encodeURIComponent(a),n=encodeURIComponent(r),c=encodeURIComponent("\r\n"),s=e.img;switch(t){case"facebook":o={method:"popup",url:"//www.facebook.com/sharer/sharer.php?u="+i};break;case"twitter":o={method:"popup",url:"//twitter.com/intent/tweet?text="+n+"&url="+i};break;case"google":o={method:"popup",url:"//plus.google.com/share?url="+i+"&image="+s};break;case"blog":o={method:"popup",url:"//share.naver.com/web/shareView.nhn?url="+i+"&title="+n};break;case"band":o={method:"web2app",param:"create/post?text="+n+c+i,a_store:"itms-apps://itunes.apple.com/app/id542613198?mt=8",g_store:"market://details?id=com.nhn.android.band",a_proto:"bandapp://",g_proto:"scheme=bandapp;package=com.nhn.android.band"};break;default:return void alert("지원하지 않는 SNS입니다.")}switch(o.method){case"popup":window.open(o.url,"share_"+t,"resizable=no");break;case"web2app":if(navigator.userAgent.match(/android/i))setTimeout(()=>{location.href="intent://"+o.param+"#Intent;"+o.g_proto+";end"});else if(navigator.userAgent.match(/(iphone)|(ipod)|(ipad)/i))setTimeout(()=>{location.href=o.a_store}),setTimeout(()=>{location.href=o.a_proto+o.param});else{if("band"===t){const e=n+" | "+i;return void window.open("http://www.band.us/plugin/share?body="+e,"share_band","width=410, height=540, resizable=no")}alert("이 기능은 모바일에서만 사용할 수 있습니다.")}}}}export{DateHelper,DaumPostHelper,Factory,FileHelper,KakaoMapHelper,Login,SearchHelper,SocialShareHelper,StorageHelper,UrlHelper,ValidationHelper,VueHelper};
//# sourceMappingURL=cool-library-0.2.5.esm.min.js.map
